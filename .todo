- wiki:
    - oauth2
        - naming: replace 'setPOSTResponseRenderer' by 'setPOSTErrorRenderer' @done
        - do a page per step:
            - authorizationRoute for Device authorization and Authorization code (createMatchAuthCodeResult, ...) @done
            - tokenRoute (verifyCodeVerifier, ...) @done
            - refreshTokenRoute for Device authorization and Authorization code @done
            - use, generate and rotate jwks keys (generateKeyPair, checkAndRotateKeys, createIdToken)  @done
            - sign access tokens with public keys (useAccessTokenJwks, createJwtAccessToken, ...), @done
            - MultipleFlows (OIDC Multiple Flows) @done
            - OIDC Auth code example @done
            - UserInfo endpoint (additionalConfiguration + route scopes (openid required)) @done
            
- @kaapi/server: `auth: true` should not set up startegy but only `mode: 'required'`. Strategy should be explicitly defined. @done

- @kaapi/validator-valibot
    - doc helpers
    - wrapping function in case "route.options" is a function (do it for all validators)
        - cannot depend on to-json-schema (Error: The "trim" action cannot be converted to JSON Schema., ....), must depend on valibot object @done

- @kaapi/validator-zod @done
    - Test coverage (c8) @done
        - Plugin registration @done
            - Test that validatorZod integrates correctly with Kaapi @done
            - Ensure zodDocsConfig is applied when docs are enabled @done
        - Schema validation @done
            - Validate correct payloads, queries, headers, etc. @done
            - Test failure cases with malformed input @done
            - Confirm failAction behaves as expected (e.g., logs, custom handler) @done
        - Overrides @done
            - Global options and failAction are respected @done
            - Per-route overrides override global ones @done
        - Edge cases @done
            - Optional/default fields @done
            - Nested schemas @done
            - Meta descriptions (if used in docs) @done
        - Docs generation (if applicable) @done
            - Confirm schema metadata is reflected in generated docs @done

- @kaapi/kaapi
    - documentation:
        - modifiers:
            - URGENT: it should always be a factory (() => modifiers) and NEVER a direct instance. Hapi serializes objects in config so private props get lost.
        - remove plugin...story and use options.notes instead. @done
        - handle the case where options is a function (options(server: Server))
        - cache result (openapi, postman)?
    - security by route (strategy and scopes) in routeMeta (docs) @done
        - => limited to max one access config by route and default config should be set before registering route or else refreshDocs is necessary @done
    - api-doc-helper: @done
        - authorize array of helper classes in the config for DelegatingHelper to do its job --> new method in KaapiTools instead @done
    - zod validator @done
        - kapi app should have something like app.extensions() --> using app.base() decorators instead @done
        - extend() should give access to a method to expose callable API to extensions() --> using server.decorate (utilities) or server.method (reusable logic with caching) instead @done
        - use it like: app.extend(MyPlugin); app.extensions().myplugin.run(); --> using app.base().myplugin.run() instead @done
    - create some auth designs: @done
        - basic auth (to create from scratch) @done
        - bearer (take it from the examples/auth-designs/src/plugins/apiKeyDesign.ts) @done
        - apikey (take it from the examples/auth-designs/src/plugins/bearerDesign.ts) @done

- @kaapi/oauth2-auth-design
    - oidc docs for OpenAPI should not be oauth2 but openid 
    - auth code authorizationRoute: a method to validate params at GET would be nice if we don't want to use the whole setGETResponseRenderer
    - auth code: response_mode - `query` or `form_post` for redirect
    - cli create templates
    - getDiscoveryConfiguration() should check if userinfo_endpoint was set. It should prefix it by the host if it starts with "/". @done
    - naming: replace 'setPOSTResponseRenderer' by 'setPOSTErrorRenderer' @done
    - improvements - the return type for generateCode (AuthCodeGenerator): AuthCodeGeneratorResult @done
    - REPLACE AnyOAuth2ErrorCodeType by OAuth2ErrorCode @done
    - REPLACE all error codes written in string to use OAuth2ErrorCode... @done   
    - be able to verify jwt in refresh token @done
    - unify: move options (?OAuth2AuthOptions<any>) and strategyName (?string) and integrateStrategy to OAuth2AuthDesignOptions @done
    - jwks keys rotation freq and token ttl are independents, make it so. AND THE STORE shouldn't have to handle that. @done
        - store @done
        - publicKeyTtl @done
        - rotationIntervalMs @done
        - logger @done
    - REVIEW TOKEN SIGNING because something might be wrong @done
        - what is wrong is that the private part is in the saved keys. Private part should be saved separately. @done
    - check out token type DPoP (Demonstration of Proof-of-Possession) @done
    - client_secret_basic as it is considered more secure than client_secret_post which is usually used for debug @done
    - should also support "client_secret_jwt" and "private_key_jwt" and token_endpoint_auth_signing_alg_values_supported @done
    - use Client Authentication Methods (client_secret_jwt, ...) in client credentials flow @done
    - package json exports: "." and "cli" @done
    - auth code + client creds (no OpenID): @done
        - utils: function to validate codeVerifier vs saved codeChallenge @done
        - createJwtAccessToken @done
            - client credentials @done
            - auth code @done
        - createIdToken @done
            - client credentials @done
            - auth code @done
        - jwksRoute (because yes, without OpenID, it can be used to validaten JWT access token) @done
            - client credentials @done
            - auth code @done
        - useAccessTokenJwks @done
            - client credentials @done
            - auth code @done
        - openID connect @done
            - client credentials @done
                - docs() @done
                - Discovery Endpoint (/.well-known/openid-configuration) @done
            - auth code @done
            - merge discovery config properly (in case of arrays) @done
        - REALLY UPDATE AUTH CODE ONCE CLIENT CREDENTIALS WORKS @done
        - Supporting Multiple Flows (see NOTES: Intends to support multiple flows) (probably will have to expose route handlers and switch depending on the grant type) @done
    - make usage more simple (default classes with default routes, then all methods in the same class) @done
    - make usage more simple (get token type (string) in params for token and refresh token) @done

- @kaapi/kaapi
    - make an example with @novice1/socket @done
    - need to think more about how we are going to handle readiness (registering plugins, strategies, ...)

- @kaapi/cli
    - auth design generator (name of the class, camelCase it)


